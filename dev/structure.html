<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Structure | ipyaggrid</title>
    <meta name="description" content="Using ag-Grid interactively in a Jupyter notebook">
    <link rel="icon" href="/ipyaggrid/favicon-16x16.png">
    
    <link rel="preload" href="/ipyaggrid/assets/css/0.styles.e73c49e3.css" as="style"><link rel="preload" href="/ipyaggrid/assets/js/app.a1424548.js" as="script"><link rel="preload" href="/ipyaggrid/assets/js/39.7169b902.js" as="script"><link rel="prefetch" href="/ipyaggrid/assets/js/1.461fc821.js"><link rel="prefetch" href="/ipyaggrid/assets/js/10.bafb4e65.js"><link rel="prefetch" href="/ipyaggrid/assets/js/11.245eadde.js"><link rel="prefetch" href="/ipyaggrid/assets/js/12.c2ac1079.js"><link rel="prefetch" href="/ipyaggrid/assets/js/13.3695328e.js"><link rel="prefetch" href="/ipyaggrid/assets/js/14.b3610413.js"><link rel="prefetch" href="/ipyaggrid/assets/js/15.cac98349.js"><link rel="prefetch" href="/ipyaggrid/assets/js/16.a48d4db7.js"><link rel="prefetch" href="/ipyaggrid/assets/js/17.b364dfd3.js"><link rel="prefetch" href="/ipyaggrid/assets/js/18.3ceb0be9.js"><link rel="prefetch" href="/ipyaggrid/assets/js/19.01cab638.js"><link rel="prefetch" href="/ipyaggrid/assets/js/2.50a98492.js"><link rel="prefetch" href="/ipyaggrid/assets/js/20.e6cda6f4.js"><link rel="prefetch" href="/ipyaggrid/assets/js/21.8d5e05f9.js"><link rel="prefetch" href="/ipyaggrid/assets/js/22.6470fbec.js"><link rel="prefetch" href="/ipyaggrid/assets/js/23.a80a8c1d.js"><link rel="prefetch" href="/ipyaggrid/assets/js/24.15c6f5e1.js"><link rel="prefetch" href="/ipyaggrid/assets/js/25.f21359ff.js"><link rel="prefetch" href="/ipyaggrid/assets/js/26.6db36f1e.js"><link rel="prefetch" href="/ipyaggrid/assets/js/27.aa316a25.js"><link rel="prefetch" href="/ipyaggrid/assets/js/28.03f29e41.js"><link rel="prefetch" href="/ipyaggrid/assets/js/29.217eac82.js"><link rel="prefetch" href="/ipyaggrid/assets/js/30.f40e8cd0.js"><link rel="prefetch" href="/ipyaggrid/assets/js/31.5567c152.js"><link rel="prefetch" href="/ipyaggrid/assets/js/32.0d779f86.js"><link rel="prefetch" href="/ipyaggrid/assets/js/33.afc7e731.js"><link rel="prefetch" href="/ipyaggrid/assets/js/34.b1f6eef5.js"><link rel="prefetch" href="/ipyaggrid/assets/js/35.3611b109.js"><link rel="prefetch" href="/ipyaggrid/assets/js/36.0f242111.js"><link rel="prefetch" href="/ipyaggrid/assets/js/37.7e10fec4.js"><link rel="prefetch" href="/ipyaggrid/assets/js/38.e9b6fd17.js"><link rel="prefetch" href="/ipyaggrid/assets/js/40.a19d6dca.js"><link rel="prefetch" href="/ipyaggrid/assets/js/41.d7471438.js"><link rel="prefetch" href="/ipyaggrid/assets/js/42.b518f0a6.js"><link rel="prefetch" href="/ipyaggrid/assets/js/43.271b4070.js"><link rel="prefetch" href="/ipyaggrid/assets/js/44.8397be05.js"><link rel="prefetch" href="/ipyaggrid/assets/js/45.99c337ec.js"><link rel="prefetch" href="/ipyaggrid/assets/js/46.b1b977ab.js"><link rel="prefetch" href="/ipyaggrid/assets/js/5.37d2ce9e.js"><link rel="prefetch" href="/ipyaggrid/assets/js/6.79c3d8e4.js"><link rel="prefetch" href="/ipyaggrid/assets/js/7.e6662c15.js"><link rel="prefetch" href="/ipyaggrid/assets/js/8.1a0306f2.js"><link rel="prefetch" href="/ipyaggrid/assets/js/9.51cc0aa1.js"><link rel="prefetch" href="/ipyaggrid/assets/js/vendors~docsearch.f27c720f.js">
    <link rel="stylesheet" href="/ipyaggrid/assets/css/0.styles.e73c49e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ipyaggrid/" class="home-link router-link-active"><!----> <span class="site-name">ipyaggrid</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ipyaggrid/overview/purpose.html" class="nav-link">Overview</a></div><div class="nav-item"><a href="/ipyaggrid/guide/install.html" class="nav-link">User Guide</a></div><div class="nav-item"><a href="/ipyaggrid/dev/dev_install.html" class="nav-link">Development</a></div> <a href="https://github.com/widgetti/ipyaggrid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ipyaggrid/overview/purpose.html" class="nav-link">Overview</a></div><div class="nav-item"><a href="/ipyaggrid/guide/install.html" class="nav-link">User Guide</a></div><div class="nav-item"><a href="/ipyaggrid/dev/dev_install.html" class="nav-link">Development</a></div> <a href="https://github.com/widgetti/ipyaggrid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Overview</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ipyaggrid/overview/purpose.html" class="sidebar-link">Purpose</a></li><li><a href="/ipyaggrid/overview/ag-Grid.html" class="sidebar-link">ag-Grid</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>User Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ipyaggrid/guide/install.html" class="sidebar-link">Install</a></li><li><a href="/ipyaggrid/guide/create.html" class="sidebar-link">Create</a></li><li><a href="/ipyaggrid/guide/customize.html" class="sidebar-link">Customize</a></li><li><a href="/ipyaggrid/guide/export.html" class="sidebar-link">Export</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Developer</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ipyaggrid/dev/dev_install.html" class="sidebar-link">Dev Install</a></li><li><a href="/ipyaggrid/dev/publish.html" class="sidebar-link">Publish</a></li><li><a href="/ipyaggrid/dev/doc.html" class="sidebar-link">Documentation</a></li><li><a href="/ipyaggrid/dev/structure.html" aria-current="page" class="active sidebar-link">Structure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ipyaggrid/dev/structure.html#in-down-up-out" class="sidebar-link">In, Down, Up, Out</a></li><li class="sidebar-sub-header"><a href="/ipyaggrid/dev/structure.html#counters" class="sidebar-link">Counters</a></li><li class="sidebar-sub-header"><a href="/ipyaggrid/dev/structure.html#javascript-injection" class="sidebar-link">JavaScript injection</a></li><li class="sidebar-sub-header"><a href="/ipyaggrid/dev/structure.html#serializers" class="sidebar-link">Serializers</a></li><li class="sidebar-sub-header"><a href="/ipyaggrid/dev/structure.html#time-zones" class="sidebar-link">Time Zones</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="structure"><a href="#structure" class="header-anchor">#</a> Structure</h1> <p>This section contains a few <strong>ipyaggrid</strong> key architecture decisions and thier reasons.</p> <h2 id="in-down-up-out"><a href="#in-down-up-out" class="header-anchor">#</a> In, Down, Up, Out</h2> <p>in an ipywidget, the data lives in Python and JavaScript and get synced between the two.<br>
To make the data path clear we have added the following suffixes to data variables. Each corresponds to a step on the path:</p> <ul><li><code>_in</code>: Python variable, data input by the Python user</li> <li><code>_down</code>: Python/JavaScript variable, synced down from Python to JavaScript when assigned</li> <li><code>_up</code>: Python/JavaScript variable, synced up from JavaScript to Python upon JavaScript event</li> <li><code>_out</code>: Python variable, data made available to the Python user, built from <code>_up</code></li></ul> <p>This sequence of variables on the data sync path make the ipyaggrid easy to use, hopefully , and simpler to debug and understand.</p> <p>The variables naturally hidden to the Python user typically start with <code>_</code>, the others not.</p> <p>As a consequence, the 4 variables containing grid data are:</p> <ul><li><code>grid_data_in</code></li> <li><code>_grid_data_down</code></li> <li><code>_grid_data_up</code></li> <li><code>grid_data_out</code></li></ul> <h2 id="counters"><a href="#counters" class="header-anchor">#</a> Counters</h2> <p>In order to detect changes in variables synced across the Python-JavaScript border, ipywidgets use the library <a href="https://github.com/ipython/traitlets" target="_blank" rel="noopener noreferrer">traitlets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>However in the case of a <code>dict</code> or <code>list</code> changing one key/value or element is not enough to trigger the sync, as explained in the <a href="https://github.com/jupyter-widgets/ipywidgets/issues/786" target="_blank" rel="noopener noreferrer">ipywidget issue 786<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. For this reason we have added the <code>_counter_update_data</code> variable in the AgGridModel. Incrementing it enables to unambiguously signal the JavaScript code that it must perform some operation.</p> <p>More specifically, upon counter increment the Javascript starts delete/export operations based on other synced variables value. These operations ultimately update <code>_grid_data_up</code> and then <code>grid_data_out</code>.</p> <p>However there is a bug in ipywidgets, explained in the <a href="https://github.com/ipython/traitlets/issues/496" target="_blank" rel="noopener noreferrer">trailets issue 496<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, that prevents syncing a <code>dict</code> in some cases. The <a href="https://github.com/ipython/traitlets/pull/466" target="_blank" rel="noopener noreferrer">traitlets PR 466<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> should solve this problem. In the meantime we have added a <code>counter</code> key/value in the <code>grid_data_out</code> variable to always trigger the update. See file <a href="https://gitlab.com/DGothrek/ipyaggrid/blob/master/ipyaggrid/grid.py" target="_blank" rel="noopener noreferrer">grid.py<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="javascript-injection"><a href="#javascript-injection" class="header-anchor">#</a> JavaScript injection</h2> <p><strong>ipyaggrid</strong> approach is to wrap ag-Grid as transparently as possible in order to:</p> <ul><li>provide unlimited access to all ag-Grid features</li> <li>avoid maintaining a Python-Javascript translation layer</li></ul> <p>So a user can write javascript and pass it as a Python str to the <code>Grid</code> constructor.<br>
This code is parsed and eval-ed in the browser. Consequently a notebook with <strong>ipyaggrid</strong> may contain arbitrary Javascript code - like any website by the way. In order to mitigate the potential security issue we recommend to:</p> <ul><li>Pay attention to the origin of the notebooks you run - to the same extent you visit potentially malicious websites</li> <li>Get into the habit of running Jupyter in a Private mode</li></ul> <h2 id="serializers"><a href="#serializers" class="header-anchor">#</a> Serializers</h2> <p>When working with the <code>DOMWidgetModel</code>, it is necessary to extend the serializers from
<code>DOMWidgetModel.serializers</code>. Otherwise the layout, which needs a proper
serializer, will not have it and you will probably get an error.</p> <p>For compatibility with Python gzip, use <code>pako.gzip</code>, not <code>pako.deflate</code>.</p> <p>A side benefit of serializing - gunzip - the ipywidget data is that all content with single/double quotes or backticks will be properly encapsulated and consequently will enable embedding in an HTML page. Without this 'trick' the JavaScript code passed as strings in the ipywidget variables will usually break a standalone HTML page containing an <strong>ipyaggrid</strong> state.</p> <h2 id="time-zones"><a href="#time-zones" class="header-anchor">#</a> Time Zones</h2> <p>In order to display a date in the same way irrespective of which time zone the user sits, we have created a Cell Renderer for dates that counter the changes performed automatically by the browser. See function <code>dateFormatter</code> in <a href="https://gitlab.com/DGothrek/ipyaggrid/blob/master/ipyaggrid/js/helpersBuiltin.js" target="_blank" rel="noopener noreferrer">helpersBuiltin.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/9/2024, 4:17:44 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/ipyaggrid/dev/doc.html" class="prev">
          Documentation
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/ipyaggrid/assets/js/app.a1424548.js" defer></script><script src="/ipyaggrid/assets/js/39.7169b902.js" defer></script>
  </body>
</html>
